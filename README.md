# IPv4 Broadcast Chat

Простое консольное приложение на C для обмена сообщениями по UDP-широковещанию (broadcast) в локальной сети.
Программа может работать одновременно как отправитель и приёмник, позволяя нескольким устройствам в одной подсети обмениваться сообщениями без центрального сервера.

---

## Сборка

Для сборки используется **make**.

```bash
make
```

После успешной сборки в корне проекта появится исполняемый файл:

```
./ipv4_chat_broadcast
```

Очистка сборки:

```bash
make clean
```

---

## Запуск

Программа принимает несколько аргументов командной строки.
Минимально необходим — **порт** (`-p`), на котором будут приниматься и отправляться пакеты.

### Общий синтаксис

```bash
./ipv4_chat_broadcast [опции]
```

### Доступные аргументы

| Опция | Аргумент | Описание                                                                                                                                        |
| ----- | -------- | ----------------------------------------------------------------------------------------------------------------------------------------------- |
| `-a`  | `<ip>`   | IPv4-адрес для отправки. Обычно это широковещательный адрес подсети, например `192.168.1.255`. Если не указано, используется `255.255.255.255`. |
| `-p`  | `<port>` | UDP-порт для отправки и приёма (обязательный параметр).                                                                                         |
| `-v`  | —        | Включить подробный вывод (verbose-режим).                                                                                                       |
| `-h`  | —        | Показать справку.                                                                                                                               |

---

## Примеры использования

### 1. Запуск на двух устройствах в одной подсети

**Устройство 1 (приёмник):**

```bash
./ipv4_chat_broadcast -p 5000 -v
```

**Устройство 2 (отправитель):**

```bash
./ipv4_chat_broadcast -a 192.168.1.255 -p 5000 -v
```

Теперь всё, что набирается на втором устройстве, будет появляться в консоли первого (и наоборот, если оба слушают один порт).

---

### 2. Тест на одной машине (для отладки)

Открой два терминала:

**Терминал 1:**

```bash
./ipv4_chat_broadcast -p 6000
```

**Терминал 2:**

```bash
./ipv4_chat_broadcast -a 127.0.0.1 -p 6000
```

---

## Как это работает

1. При запуске программа создаёт UDP-сокет.
2. Слушатель биндуется на `0.0.0.0` (все интерфейсы) и указанный порт.
3. Для отправки используется адрес из `-a` (обычно broadcast подсети).
4. В отдельном потоке обрабатываются входящие сообщения.
5. Основной поток читает пользовательский ввод и отправляет UDP-пакеты в сеть.

---

## Структура проекта

```
buff/
├── src/
│   ├── main.c         # Точка входа программы
│   ├── erproc.c       # Обработка сокетов и ошибок
│   ├── utils.c        # Парсинг аргументов и конфигурация
│   └── Makefile       # Сборка проекта
└── README.md          # Этот файл
```

---

## Примечания

* Работает на Linux, macOS и других UNIX-подобных системах.
* Все устройства должны находиться в одной подсети и иметь разрешённые UDP-порты.

---

**Автор:** *TomoeYoung*

---
